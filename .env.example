# WebEDT Monorepo - Environment Variables
# Copy this file to .env and fill in your values

# =============================================================================
# LOCAL DEVELOPMENT
# =============================================================================

# Set to true to use local PostgreSQL (via Docker)
# When true, starts a local PostgreSQL container automatically
LOCAL_TESTING=false

# Local PostgreSQL settings (used when LOCAL_TESTING=true)
# To start local PostgreSQL manually:
#   docker run -d --name webedt-postgres -p 5432:5432 \
#     -e POSTGRES_USER=postgres -e POSTGRES_PASSWORD=postgres \
#     -e POSTGRES_DB=webedt postgres:15
# Then set: DATABASE_URL=postgresql://postgres:postgres@localhost:5432/webedt

# =============================================================================
# REQUIRED: Target Repository
# =============================================================================

# GitHub repository owner (username or organization)
REPO_OWNER=your-username

# GitHub repository name
REPO_NAME=your-repo

# Base branch for pull requests (default: main)
REPO_BASE_BRANCH=main

# =============================================================================
# AUTHENTICATION: Choose ONE method
# =============================================================================

# Method 1: Direct API Credentials (simplest setup)
# ------------------------------------------------

# GitHub personal access token with 'repo' scope
# Generate at: https://github.com/settings/tokens
GITHUB_TOKEN=ghp_xxxxxxxxxxxx

# Claude API OAuth access token
# Obtain via Claude authentication flow
CLAUDE_ACCESS_TOKEN=sk-ant-oat01-xxxxxxxxxxxx

# Claude API OAuth refresh token (optional, for token refresh)
CLAUDE_REFRESH_TOKEN=sk-ant-ort01-xxxxxxxxxxxx

# Method 2: Database Credential Storage (for shared credentials)
# ------------------------------------------------

# PostgreSQL connection string
# DATABASE_URL=postgresql://user:password@localhost:5432/webedt

# User email for credential lookup
# USER_EMAIL=your.email@example.com

# =============================================================================
# EXECUTION SETTINGS (optional)
# =============================================================================

# Number of parallel workers (1-10, default: 4)
PARALLEL_WORKERS=4

# Number of tasks to discover per cycle (1-10, default: 5)
TASKS_PER_CYCLE=5

# Maximum open issues before pausing discovery (default: 10)
MAX_OPEN_ISSUES=10

# Working directory for task execution
WORK_DIR=/tmp/autonomous-dev

# Task timeout in minutes (5-120, default: 30)
TIMEOUT_MINUTES=30

# =============================================================================
# EVALUATION SETTINGS (optional)
# =============================================================================

# Require build to pass before merging (default: true)
REQUIRE_BUILD=true

# Require tests to pass before merging (default: true)
REQUIRE_TESTS=true

# Require health checks to pass (default: true)
REQUIRE_HEALTH_CHECK=true

# URL pattern for preview deployments (supports {owner}, {repo}, {branch})
PREVIEW_URL_PATTERN=https://preview.your-domain.com/{owner}/{repo}/{branch}/

# =============================================================================
# MERGE SETTINGS (optional)
# =============================================================================

# Automatically merge passing PRs (default: true)
AUTO_MERGE=true

# Git merge method: merge, squash, or rebase (default: squash)
MERGE_METHOD=squash

# Conflict resolution strategy: rebase, merge, or manual (default: rebase)
CONFLICT_STRATEGY=rebase

# =============================================================================
# DAEMON SETTINGS (optional)
# =============================================================================

# Interval between cycles in milliseconds (default: 60000 = 1 minute)
LOOP_INTERVAL_MS=60000

# =============================================================================
# AI CODING WORKER SETTINGS (for ai-coding-worker service)
# =============================================================================

# Worker server port (default: 5000)
# PORT=5000

# Workspace directory for code execution
# WORKSPACE_DIR=/workspace

# =============================================================================
# INTERNAL API SERVER SETTINGS (for internal-api-server service)
# =============================================================================

# Server port (default: 3000)
# PORT=3000

# Node environment (development/production)
# NODE_ENV=development

# CORS allowed origins (comma-separated)
# ALLOWED_ORIGINS=http://localhost:5173

# Session encryption secret
# SESSION_SECRET=your-secret-key

# GitHub OAuth (for website integration)
# GITHUB_CLIENT_ID=your-github-client-id
# GITHUB_CLIENT_SECRET=your-github-client-secret

# AI Worker URL
# AI_WORKER_URL=http://localhost:5001

# OpenAI API key (for transcription feature)
# OPENAI_API_KEY=sk-xxxxxxxxxxxx
