{
  "openapi": "3.0.3",
  "info": {
    "title": "WebEDT API",
    "version": "1.0.0",
    "description": "\nWebEDT is an AI-powered code editing platform. This API provides endpoints for:\n\n- **Authentication**: User registration, login, logout, and session management\n- **Sessions**: AI coding session management (create, list, update, delete)\n- **GitHub**: OAuth integration, repository operations, file management\n- **AI Execution**: Claude Remote Sessions for AI-assisted coding\n- **Store**: Game/asset store browsing and management\n- **Community**: Social features, channels, and real-time messaging\n\n## Authentication\n\nMost endpoints require authentication via session cookies. After logging in,\nthe server sets a session cookie that must be included in subsequent requests.\n\n## Response Format\n\nAll responses follow a standardized format:\n\n**Success Response:**\n```json\n{\n  \"success\": true,\n  \"data\": { ... },\n  \"timestamp\": \"2024-01-01T00:00:00.000Z\"\n}\n```\n\n**Error Response:**\n```json\n{\n  \"success\": false,\n  \"error\": {\n    \"message\": \"Error description\",\n    \"code\": \"ERROR_CODE\",\n    \"fields\": { \"fieldName\": [\"error message\"] }\n  },\n  \"timestamp\": \"2024-01-01T00:00:00.000Z\"\n}\n```\n\n## Rate Limiting\n\nAPI endpoints may be rate-limited at the infrastructure level.\n      ",
    "contact": {
      "name": "WebEDT Support",
      "email": "support@webedt.com"
    },
    "license": {
      "name": "Proprietary"
    }
  },
  "servers": [
    {
      "url": "/api",
      "description": "Current server"
    }
  ],
  "tags": [
    {
      "name": "Health",
      "description": "Health check and monitoring endpoints"
    },
    {
      "name": "Auth",
      "description": "Authentication and session management"
    },
    {
      "name": "Sessions",
      "description": "AI coding session operations"
    },
    {
      "name": "GitHub",
      "description": "GitHub OAuth and repository operations"
    },
    {
      "name": "Execute",
      "description": "AI execution endpoints (SSE streaming)"
    },
    {
      "name": "User",
      "description": "User profile and settings"
    },
    {
      "name": "Admin",
      "description": "Administrative operations (admin only)"
    },
    {
      "name": "Store",
      "description": "Game/asset store operations"
    },
    {
      "name": "Library",
      "description": "User library management"
    },
    {
      "name": "Community",
      "description": "Community posts and discussions"
    },
    {
      "name": "Channels",
      "description": "Real-time messaging channels"
    },
    {
      "name": "Storage",
      "description": "User storage quota management"
    },
    {
      "name": "Billing",
      "description": "Subscription and billing management"
    },
    {
      "name": "Collections",
      "description": "User-created session collections"
    },
    {
      "name": "Workspace",
      "description": "Workspace presence and events"
    },
    {
      "name": "Sessions-Public",
      "description": "Public session sharing endpoints (no auth required)"
    }
  ],
  "components": {
    "securitySchemes": {
      "sessionCookie": {
        "type": "apiKey",
        "in": "cookie",
        "name": "auth_session",
        "description": "Session cookie set after successful login"
      }
    },
    "schemas": {
      "SuccessResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          }
        },
        "required": [
          "success",
          "data",
          "timestamp"
        ]
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "error": {
            "type": "object",
            "properties": {
              "message": {
                "type": "string"
              },
              "code": {
                "type": "string",
                "enum": [
                  "VALIDATION_ERROR",
                  "UNAUTHORIZED",
                  "FORBIDDEN",
                  "NOT_FOUND",
                  "CONFLICT",
                  "RATE_LIMITED",
                  "INTERNAL_ERROR",
                  "BAD_REQUEST",
                  "SERVICE_UNAVAILABLE"
                ]
              },
              "fields": {
                "type": "object",
                "additionalProperties": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            },
            "required": [
              "message"
            ]
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          }
        },
        "required": [
          "success",
          "error",
          "timestamp"
        ]
      },
      "User": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "User ID"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "displayName": {
            "type": "string",
            "nullable": true
          },
          "githubId": {
            "type": "string",
            "nullable": true
          },
          "githubAccessToken": {
            "type": "string",
            "nullable": true
          },
          "claudeAuth": {
            "type": "object",
            "nullable": true
          },
          "codexAuth": {
            "type": "object",
            "nullable": true
          },
          "geminiAuth": {
            "type": "object",
            "nullable": true
          },
          "preferredProvider": {
            "type": "string",
            "enum": [
              "claude",
              "codex",
              "gemini"
            ],
            "default": "claude"
          },
          "imageResizeMaxDimension": {
            "type": "integer",
            "nullable": true
          },
          "voiceCommandKeywords": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "defaultLandingPage": {
            "type": "string",
            "default": "store"
          },
          "preferredModel": {
            "type": "string",
            "nullable": true
          },
          "isAdmin": {
            "type": "boolean"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "ChatSession": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "userId": {
            "type": "string"
          },
          "sessionPath": {
            "type": "string",
            "nullable": true
          },
          "repositoryOwner": {
            "type": "string",
            "nullable": true
          },
          "repositoryName": {
            "type": "string",
            "nullable": true
          },
          "repositoryUrl": {
            "type": "string",
            "nullable": true
          },
          "baseBranch": {
            "type": "string",
            "nullable": true
          },
          "branch": {
            "type": "string",
            "nullable": true
          },
          "userRequest": {
            "type": "string",
            "nullable": true
          },
          "status": {
            "type": "string",
            "enum": [
              "pending",
              "running",
              "completed",
              "error"
            ]
          },
          "provider": {
            "type": "string",
            "enum": [
              "claude",
              "codex",
              "gemini"
            ],
            "nullable": true
          },
          "remoteSessionId": {
            "type": "string",
            "nullable": true
          },
          "favorite": {
            "type": "boolean"
          },
          "locked": {
            "type": "boolean"
          },
          "autoCommit": {
            "type": "boolean"
          },
          "totalCost": {
            "type": "string",
            "nullable": true
          },
          "shareToken": {
            "type": "string",
            "nullable": true
          },
          "shareExpiresAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "completedAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "deletedAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          }
        }
      },
      "SessionEvent": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "chatSessionId": {
            "type": "string",
            "format": "uuid"
          },
          "eventData": {
            "type": "object"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Repository": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "name": {
            "type": "string"
          },
          "full_name": {
            "type": "string"
          },
          "owner": {
            "type": "object",
            "properties": {
              "login": {
                "type": "string"
              }
            }
          },
          "private": {
            "type": "boolean"
          },
          "description": {
            "type": "string",
            "nullable": true
          },
          "html_url": {
            "type": "string",
            "format": "uri"
          },
          "clone_url": {
            "type": "string",
            "format": "uri"
          },
          "default_branch": {
            "type": "string"
          }
        }
      },
      "Branch": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "protected": {
            "type": "boolean"
          },
          "commit": {
            "type": "object",
            "properties": {
              "sha": {
                "type": "string"
              },
              "url": {
                "type": "string",
                "format": "uri"
              }
            }
          }
        }
      },
      "PullRequest": {
        "type": "object",
        "properties": {
          "number": {
            "type": "integer"
          },
          "title": {
            "type": "string"
          },
          "state": {
            "type": "string",
            "enum": [
              "open",
              "closed"
            ]
          },
          "htmlUrl": {
            "type": "string",
            "format": "uri"
          },
          "head": {
            "type": "object",
            "properties": {
              "ref": {
                "type": "string"
              },
              "sha": {
                "type": "string"
              }
            }
          },
          "base": {
            "type": "object",
            "properties": {
              "ref": {
                "type": "string"
              },
              "sha": {
                "type": "string"
              }
            }
          },
          "mergeable": {
            "type": "boolean",
            "nullable": true
          },
          "merged": {
            "type": "boolean"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "PaginationMeta": {
        "type": "object",
        "properties": {
          "total": {
            "type": "integer"
          },
          "limit": {
            "type": "integer"
          },
          "offset": {
            "type": "integer"
          },
          "hasMore": {
            "type": "boolean"
          }
        }
      }
    },
    "responses": {
      "Unauthorized": {
        "description": "Authentication required",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "example": {
              "success": false,
              "error": {
                "message": "Unauthorized",
                "code": "UNAUTHORIZED"
              },
              "timestamp": "2024-01-01T00:00:00.000Z"
            }
          }
        }
      },
      "Forbidden": {
        "description": "Access denied",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "example": {
              "success": false,
              "error": {
                "message": "Forbidden",
                "code": "FORBIDDEN"
              },
              "timestamp": "2024-01-01T00:00:00.000Z"
            }
          }
        }
      },
      "NotFound": {
        "description": "Resource not found",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "example": {
              "success": false,
              "error": {
                "message": "Not found",
                "code": "NOT_FOUND"
              },
              "timestamp": "2024-01-01T00:00:00.000Z"
            }
          }
        }
      },
      "ValidationError": {
        "description": "Validation error",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "example": {
              "success": false,
              "error": {
                "message": "Validation failed",
                "code": "VALIDATION_ERROR",
                "fields": {
                  "email": [
                    "Invalid email address"
                  ]
                }
              },
              "timestamp": "2024-01-01T00:00:00.000Z"
            }
          }
        }
      },
      "InternalError": {
        "description": "Internal server error",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "example": {
              "success": false,
              "error": {
                "message": "Internal server error",
                "code": "INTERNAL_ERROR"
              },
              "timestamp": "2024-01-01T00:00:00.000Z"
            }
          }
        }
      }
    }
  },
  "security": [
    {
      "sessionCookie": []
    }
  ],
  "paths": {
    "/health": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Basic health check",
        "description": "Fast health check endpoint for load balancers. Returns basic service status.",
        "security": [],
        "responses": {
          "200": {
            "description": "Service is healthy",
            "headers": {
              "X-Container-ID": {
                "description": "Container identifier",
                "schema": {
                  "type": "string"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "example": "ok"
                        },
                        "service": {
                          "type": "string",
                          "example": "website-backend"
                        },
                        "containerId": {
                          "type": "string"
                        },
                        "build": {
                          "type": "object",
                          "properties": {
                            "commitSha": {
                              "type": "string"
                            },
                            "timestamp": {
                              "type": "string"
                            },
                            "imageTag": {
                              "type": "string"
                            }
                          }
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/auth/register": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Register a new user",
        "description": "Creates a new user account with email and password. Automatically logs in the user after successful registration.",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "password"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "User's email address",
                    "example": "user@example.com"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 8,
                    "description": "Password (minimum 8 characters)",
                    "example": "mySecurePassword123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User registered successfully",
            "headers": {
              "Set-Cookie": {
                "description": "Session cookie for authentication",
                "schema": {
                  "type": "string"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "$ref": "#/components/schemas/User"
                        }
                      }
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Email already in use",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/auth/login": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Login user",
        "description": "Authenticates a user with email and password. Returns a session cookie for subsequent authenticated requests.",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "password"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "User's email address",
                    "example": "user@example.com"
                  },
                  "password": {
                    "type": "string",
                    "description": "User's password",
                    "example": "mySecurePassword123"
                  },
                  "rememberMe": {
                    "type": "boolean",
                    "description": "Extend session duration (90 days vs 30 days)",
                    "default": false
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "headers": {
              "Set-Cookie": {
                "description": "Session cookie for authentication",
                "schema": {
                  "type": "string"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "$ref": "#/components/schemas/User"
                        }
                      }
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Invalid email or password",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/auth/logout": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Logout user",
        "description": "Invalidates the current session and clears the session cookie.",
        "responses": {
          "200": {
            "description": "Logout successful",
            "headers": {
              "Set-Cookie": {
                "description": "Blank session cookie to clear authentication",
                "schema": {
                  "type": "string"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string",
                          "example": "Logged out successfully"
                        }
                      }
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/auth/session": {
      "get": {
        "tags": [
          "Auth"
        ],
        "summary": "Get current session",
        "description": "Returns the current authenticated user's session information. Also refreshes OAuth tokens if needed.",
        "responses": {
          "200": {
            "description": "Session information retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "$ref": "#/components/schemas/User"
                        },
                        "session": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "userId": {
                              "type": "string"
                            },
                            "expiresAt": {
                              "type": "string",
                              "format": "date-time"
                            }
                          }
                        }
                      }
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/github/oauth": {
      "get": {
        "tags": [
          "GitHub"
        ],
        "summary": "Initiate GitHub OAuth",
        "description": "Redirects user to GitHub for OAuth authorization. Returns user to the origin page after completion.",
        "responses": {
          "302": {
            "description": "Redirect to GitHub OAuth page"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/github/repos": {
      "get": {
        "tags": [
          "GitHub"
        ],
        "summary": "List user repositories",
        "description": "Returns all repositories accessible by the authenticated user's GitHub account.",
        "responses": {
          "200": {
            "description": "Repositories retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Repository"
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "GitHub not connected"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/github/repos/{owner}/{repo}/branches": {
      "get": {
        "tags": [
          "GitHub"
        ],
        "summary": "List repository branches",
        "description": "Returns all branches for the specified repository.",
        "parameters": [
          {
            "name": "owner",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "repo",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Branches retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Branch"
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "GitHub not connected"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      },
      "post": {
        "tags": [
          "GitHub"
        ],
        "summary": "Create a new branch",
        "description": "Creates a new branch in the specified repository from a base branch.",
        "parameters": [
          {
            "name": "owner",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "repo",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "branchName"
                ],
                "properties": {
                  "branchName": {
                    "type": "string",
                    "description": "Name of the new branch"
                  },
                  "baseBranch": {
                    "type": "string",
                    "description": "Base branch to create from (default \"main\")",
                    "default": "main"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Branch created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "branchName": {
                          "type": "string"
                        },
                        "baseBranch": {
                          "type": "string"
                        },
                        "sha": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Branch name is required or GitHub not connected"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "422": {
            "description": "Branch already exists"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/github/repos/{owner}/{repo}/pulls": {
      "get": {
        "tags": [
          "GitHub"
        ],
        "summary": "List pull requests",
        "description": "Returns pull requests for the specified repository with optional filtering.",
        "parameters": [
          {
            "name": "owner",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "repo",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "head",
            "in": "query",
            "description": "Filter by head branch",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "base",
            "in": "query",
            "description": "Filter by base branch",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Pull requests retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/PullRequest"
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "GitHub not connected"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/sessions/shared/{token}": {
      "get": {
        "tags": [
          "Sessions-Public"
        ],
        "summary": "Get shared session by token",
        "description": "Public endpoint to access a shared session via share token. No authentication required.",
        "security": [],
        "parameters": [
          {
            "name": "token",
            "in": "path",
            "required": true,
            "description": "Share token (UUID)",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Shared session retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "session": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "userRequest": {
                          "type": "string"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "pending",
                            "running",
                            "completed",
                            "error"
                          ]
                        },
                        "repositoryOwner": {
                          "type": "string"
                        },
                        "repositoryName": {
                          "type": "string"
                        },
                        "branch": {
                          "type": "string"
                        },
                        "provider": {
                          "type": "string"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "completedAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "previewUrl": {
                          "type": "string",
                          "nullable": true
                        },
                        "isShared": {
                          "type": "boolean",
                          "example": true
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Share token is required"
          },
          "404": {
            "description": "Session not found or share link expired"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/sessions/create-code-session": {
      "post": {
        "tags": [
          "Sessions"
        ],
        "summary": "Create a new code session",
        "description": "Creates a new AI coding session with specified repository and branch.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "repositoryOwner",
                  "repositoryName",
                  "baseBranch",
                  "branch"
                ],
                "properties": {
                  "title": {
                    "type": "string",
                    "description": "Session title"
                  },
                  "repositoryOwner": {
                    "type": "string",
                    "description": "GitHub repository owner",
                    "example": "octocat"
                  },
                  "repositoryName": {
                    "type": "string",
                    "description": "GitHub repository name",
                    "example": "hello-world"
                  },
                  "baseBranch": {
                    "type": "string",
                    "description": "Base branch to fork from",
                    "example": "main"
                  },
                  "branch": {
                    "type": "string",
                    "description": "Feature branch name",
                    "example": "feature/add-readme"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "session": {
                      "$ref": "#/components/schemas/ChatSession"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Missing required fields"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/sessions": {
      "get": {
        "tags": [
          "Sessions"
        ],
        "summary": "List all sessions",
        "description": "Returns all active (non-deleted) chat sessions for the authenticated user.",
        "responses": {
          "200": {
            "description": "Sessions retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "sessions": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/ChatSession"
                          }
                        },
                        "total": {
                          "type": "integer"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/sessions/search": {
      "get": {
        "tags": [
          "Sessions"
        ],
        "summary": "Search sessions",
        "description": "Search sessions by query string with optional filters.",
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "required": true,
            "description": "Search query string",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Maximum number of results (max 100)",
            "schema": {
              "type": "integer",
              "default": 50,
              "maximum": 100
            }
          },
          {
            "name": "offset",
            "in": "query",
            "description": "Number of results to skip",
            "schema": {
              "type": "integer",
              "default": 0
            }
          },
          {
            "name": "status",
            "in": "query",
            "description": "Filter by session status",
            "schema": {
              "type": "string",
              "enum": [
                "pending",
                "running",
                "completed",
                "error"
              ]
            }
          },
          {
            "name": "favorite",
            "in": "query",
            "description": "Filter by favorite status",
            "schema": {
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Search results",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "sessions": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/ChatSession"
                          }
                        },
                        "total": {
                          "type": "integer"
                        },
                        "limit": {
                          "type": "integer"
                        },
                        "offset": {
                          "type": "integer"
                        },
                        "hasMore": {
                          "type": "boolean"
                        },
                        "query": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Search query is required or invalid status"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    },
    "/sessions/{id}": {
      "get": {
        "tags": [
          "Sessions"
        ],
        "summary": "Get session by ID",
        "description": "Returns a specific chat session with preview URL if applicable.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Session ID (UUID)",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Session retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "session": {
                      "$ref": "#/components/schemas/ChatSession"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid session ID"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      },
      "delete": {
        "tags": [
          "Sessions"
        ],
        "summary": "Delete session",
        "description": "Soft deletes a session (moves to trash). Also archives the Claude Remote session and deletes the GitHub branch if applicable.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Session ID (UUID)",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Session deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string",
                          "example": "Session deleted"
                        },
                        "cleanup": {
                          "type": "object",
                          "properties": {
                            "branch": {
                              "type": "object",
                              "properties": {
                                "success": {
                                  "type": "boolean"
                                },
                                "message": {
                                  "type": "string"
                                }
                              }
                            },
                            "remoteSession": {
                              "type": "object",
                              "properties": {
                                "success": {
                                  "type": "boolean"
                                },
                                "message": {
                                  "type": "string"
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid session ID"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        }
      }
    }
  }
}